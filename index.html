<!DOCTYPE HTML>
<html>
    <head>  <link rel="stylesheet" href="html5up-photon/assets/css/main.css" />
        @import "compass/css3";

.table-editable {
  position: relative;
  
  .glyphicon {
    font-size: 20px;
  }
}

.table-remove {
  color: #700;
  cursor: pointer;
  
  &:hover {
    color: #f00;
  }
}

.table-up, .table-down {
  color: #007;
  cursor: pointer;
  
  &:hover {
    color: #00f;
  }
}

.table-add {
  color: #070;
  cursor: pointer;
  position: absolute;
  top: 8px;
  right: 0;
  
  &:hover {
    color: #0b0;
  }
}
        <noscript>
            <link rel="stylesheet" href="html5up-photon/assets/css/noscript.css" />
            @import "compass/css3";

.table-editable {
  position: relative;
  
  .glyphicon {
    font-size: 20px;
  }
}

.table-remove {
  color: #700;
  cursor: pointer;
  
  &:hover {
    color: #f00;
  }
}

.table-up, .table-down {
  color: #007;
  cursor: pointer;
  
  &:hover {
    color: #00f;
  }
}

.table-add {
  color: #070;
  cursor: pointer;
  position: absolute;
  top: 8px;
  right: 0;
  
  &:hover {
    color: #0b0;
  }
}
        </noscript>
        <style>




            
            div.sticky {
              position: -webkit-sticky;
              position: sticky;
              bottom: 4px;
              padding: 5px;
              background-color: #fefeff;
              border: 2px solid #dee1f0;
            }
            table {
                border-collapse: collapse;
                width: 80%
            }

                td {
                border: 1px solid black;
                padding: 3px 5px;
            }
            
        </style>
    </head>
<body>
    
  <p>Before the script...</p>

  <script>
  "use strict";
    let currentUser = 0;
    let userArray = [];
    new User(0);

    //Create a character object, createCharacter function
    function User( index ) {
        if ( index != 0 ) currentUser += index;
        userArray[currentUser] = this;
        userArray[currentUser].name = "Link";
        //userArray[currentUser].name = prompt("Welcome to Kiojaklettr. Please enter your character's name now.","Link");
        userArray[currentUser].charClass = "Ranger";
        userArray[currentUser].money = Math.floor(Math.random() * 100 );
    };


    function rolldX() { 
            let sides = prompt("How many sides on this dice?",6);
            let result = Math.ceil(Math.random() * sides);
            document.getElementById("main_body").insertAdjacentHTML("afterend", 
                "<p>You roll a " + result + ".</p>"); 
        };

    function rollD6() {
        let result = Math.ceil(Math.random() * 6);
        document.getElementById("main_body").insertAdjacentHTML("afterend", 
                "<p>You roll a " + result + ".</p>"); 
    }

    function testRollD6() {
        let result = [0,0,0,0,0,0,0];
        for (let i=0; i<1000; i++)
        {
            let roll = Math.ceil(Math.random() * 6);
            if ( roll > 6 || roll < 1 ) alert(`Help, I somehow got a ${roll}`);
            result[roll]++;
        }

        let resultPercentages = [];
        result.forEach(function( item,index,result) {
            resultPercentages[index] = ( Math.round(( item / 1000 ) * 100)) + "%";
        });
            
        document.getElementById("main_body").insertAdjacentHTML("afterend", 
                "<p>Let's do some testing. We rolled 1000 times and got " + result + "<br> and also saw " + resultPercentages + "</p>"
                ); 
    }

    function newAction() {
        let actionOutput = document.getElementById("input_bar").value;
        document.getElementById("main_body").insertAdjacentHTML("afterend", 
            "<p>" + userArray[currentUser].name + " " + actionOutput + ".</p>"); 
        let _input_bar = document.getElementById("input_bar");
        _input_bar.value = "";
            
    }


    function showUserArray() {
        //userArray.forEach(alert( `Your characters: ${name}`));
        let charNames = userArray.map(character => ({
      name: `${character.name}`
    }))
        alert(charNames['name']);
    };  


    var $TABLE = $('#table');
var $BTN = $('#export-btn');
var $EXPORT = $('#export');

$('.table-add').click(function () {
  var $clone = $TABLE.find('tr.hide').clone(true).removeClass('hide table-line');
  $TABLE.find('table').append($clone);
});

$('.table-remove').click(function () {
  $(this).parents('tr').detach();
});

$('.table-up').click(function () {
  var $row = $(this).parents('tr');
  if ($row.index() === 1) return; // Don't go above the header
  $row.prev().before($row.get(0));
});

$('.table-down').click(function () {
  var $row = $(this).parents('tr');
  $row.next().after($row.get(0));
});

// A few jQuery helpers for exporting only
jQuery.fn.pop = [].pop;
jQuery.fn.shift = [].shift;

$BTN.click(function () {
  var $rows = $TABLE.find('tr:not(:hidden)');
  var headers = [];
  var data = [];
  
  // Get the headers (add special header logic here)
  $($rows.shift()).find('th:not(:empty)').each(function () {
    headers.push($(this).text().toLowerCase());
  });
  
  // Turn all existing rows into a loopable array
  $rows.each(function () {
    var $td = $(this).find('td');
    var h = {};
    
    // Use the headers from earlier to name our hash keys
    headers.forEach(function (header, i) {
      h[header] = $td.eq(i).text();   
    });
    
    data.push(h);
  });
  
  // Output the result
  $EXPORT.text(JSON.stringify(data));
});






    //Starting text
    document.body.innerHTML = "<p>Welcome! Please use the buttons below to roll a 6-sided or custom-sided dice." 

  </script>
  
  <div class="container">
    <h1>HTML5 Editable Table</h1>
    <p>Through the powers of <strong>contenteditable</strong> and some simple jQuery you can easily create a custom editable table. No need for a robust JavaScript library anymore these days.</p>
    
    <ul>
      <li>An editable table that exports a hash array. Dynamically compiles rows from headers</li> 
      <li>Simple / powerful features such as add row, remove row, move row up/down.</li>
    </ul>
    
    <div id="table" class="table-editable">
      <span class="table-add glyphicon glyphicon-plus"></span>
      <table class="table">
        <tr>
          <th>Name</th>
          <th>Value</th>
          <th></th>
          <th></th>
        </tr>
        <tr>
          <td contenteditable="true">Stir Fry</td>
          <td contenteditable="true">stir-fry</td>
          <td>
            <span class="table-remove glyphicon glyphicon-remove"></span>
          </td>
          <td>
            <span class="table-up glyphicon glyphicon-arrow-up"></span>
            <span class="table-down glyphicon glyphicon-arrow-down"></span>
          </td>
        </tr>
        <!-- This is our clonable table line -->
        <tr class="hide">
          <td contenteditable="true">Untitled</td>
          <td contenteditable="true">undefined</td>
          <td>
            <span class="table-remove glyphicon glyphicon-remove"></span>
          </td>
          <td>
            <span class="table-up glyphicon glyphicon-arrow-up"></span>
            <span class="table-down glyphicon glyphicon-arrow-down"></span>
          </td>
        </tr>
      </table>
    </div>
    
    <button id="export-btn" class="btn btn-primary">Export Data</button>
    <p id="export"></p>
  </div>

  <p id="main_body"></p> 
  <p>
    <input id="bRollD6" type="button" value="Roll d6" onclick="rollD6()" />
    <input id="bRollDX" type="button" value="Roll dX" onclick="rolldX()" />

  </p>

</body>

</html>